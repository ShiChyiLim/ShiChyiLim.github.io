<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="photo.css">
    <title>上傳房源照片</title>
</head>
<body>
    <div class="d-flex">
        <div class="left">
            <video autoplay controls muted loop class="video"   style="object-fit: cover; object-position:center top;">
                <source src="https://a0.muscache.com/v/d6/12/d6120feb-75fc-52dd-b5bb-5755913fb756/d6120feb75fc52ddb5bb5755913fb756_4000k_1.mp4" type="video/mp4" style="box-sizing: border-box;" playsinline preload ="auto">
            </video>
            <h1><strong>接下來，請爲房源新增幾張相片</strong></h1>
        </div>
        <div class="right">
            <div class="d-flex">
                <div class="btn-group">
                    <button type="button" class="btn-h text-black"><strong>協助</strong></button>
                    <button type="button" class="btn-h text-black"><strong>儲存並退出</strong></button>
                </div>
                <div class="photoarea" id="photoarea">
                    <input type="file" id="fileUploader" class="d-none" onchange="handleFiles(this.files)">
                <div id="upload_zone" class="upload_zone">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64px" height="64px" fill="currentColor" class="bi bi-card-image" viewBox="0 0 16 16">
                        <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                        <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"/>
                    </svg>
                    <p class="text"><strong>將相片拖曳到此處</strong></p>
                    <p>請新增至少 5 張相片</p>
                    <a href="" style="color:black;font-size: 13px;">從你的裝置上傳</a>
                </div>
                <div id="preview"></div>
                </div>
                

                <div class="last-bar">
                    <button type="button" class="back"><strong>返回</strong></button>
                    <button type="button" class="next text-white" id="next">下一步</button>
                </div>
            </div>
        </div>
    </div>
            
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/ed5018315e.js" crossorigin="anonymous"></script>
    <script>
        const dropbox = document.getElementById("upload_zone");
        const preview = document.getElementById("preview");

        function handleFileSelect(e) {
        e.stopPropagation();
        e.preventDefault();
        const fileUploader = document.getElementById("fileUploader");
        fileUploader.click();
    }

    const click = e => handleFileSelect(e);
    function dragenter(e) {
        // add the styling to div
        dropbox.classList.add("upload_zone_enter");
        e.stopPropagation();
        e.preventDefault();
    }

    const dragleave = () => dropbox.classList.remove("upload_zone_enter");

    // prevent the default method working
    function dragover(e) {
        e.stopPropagation();
        e.preventDefault();
    }

    function handleFiles(files) {
        for (var i = 0; i < files.length; i++) {
            const file = files[i];
            const imageType = /image.*/;

            if (!file.type.match(imageType)) {
                continue;
            }

            const img = document.createElement("img");
            img.classList.add("obj");
            img.file = file;
            img.style.width= "auto";
            img.style.height="300px";
            preview.appendChild(img);

            const reader = new FileReader();
            reader.onload = (e => img.src = e.target.result);
            reader.readAsDataURL(file);
            document.getElementById("upload_zone").style.display = "none";
        }
    }

    function drop(e) {
        e.stopPropagation();
        e.preventDefault();

        const dt = e.dataTransfer;
        const files = dt.files;

        handleFiles(files);
        dropbox.classList.remove("upload_zone_enter");
    }

    dropbox.addEventListener("click", click, false);
    dropbox.addEventListener("dragenter", dragenter, false);
    dropbox.addEventListener("dragleave", dragleave, false);
    dropbox.addEventListener("dragover", dragover, false);
    dropbox.addEventListener("drop", drop, false);


    document.getElementById("next").onclick = function(){
        location.href= "https://shichyilim.github.io/Project/title.html";
    }
    </script>


</body>
</html>